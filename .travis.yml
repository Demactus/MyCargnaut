language: node_js
node_js:
- 14.1.0
addons:
  chrome: stable
before_install:
- google-chrome-stable --headless --disable-gpu --remote-debugging-port=9222 http://localhost
  &
cache:
  directories:
  - "./node_modules"
before_script: "— npm install -g ionic — npm ci"
jobs:
  include:
  - stage: build
    script: ionic build --prod -- --base-href ./
  - stage: test
    script: npm run test
deploy:
- provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep-history: true
- provider: releases
  api_key: "$GITHUB_TOKEN"
  file_glob: true
  file: myCargonaut-*.tgz
  skip_cleanup: true
  on:
    branch: master
    tags: true
  local_dir: www
- provider: firebase
  skip_cleanup: true
  token:
    secure: "$FIREBASE_TOKEN"
env:
  global:
    secure: fOk6HI+wYA8eEKJ9DKwyQ7qE6DSkfOrn3TWznx4Rc5LX/zD4DreMhpTlcyFgNJB8+QKHtcMVVnkFcbTkkWBG3b+8tm0ogKGvooW5pTW23fhBS3gl3Hhrro7pGqK1bQaQmkgdS/X4GA8nlDZf5d/PUCW5K+66NohOwm1MCoubL5PPS+zVIQyvY4ypP9zs48q0Tc23YCGeg+Q9Q1vBm/Gp3EbZa49Is4+LswfBM0deYpmsRWHAbnoVNbHAsqHwhWfRpm2k+oRPmn7YQvatfodL4UKwMDCjjcdm9K+A0aQnxZuNOOLGU1g8Gp402xY2rC1DWd74oSB6aovwocYqOlt5Vg8UTto7st839LVClT+9qvBW+n163ijgwOX7Jj1wLjAM9UyKcHNAG8rYcY+v1FNRFyJjZC0BINVyTcJVG5jQIXkh6kIEcEJw9TWgCRwN9ro5m1wSmJtzJv8R3McTNMzrHK4w5pQYckBbAxQ8eX0sK8/DF2c1MdrI+0XlIdksBuBC763IP4kqbfX4GlyFJRGCDfwvc/Yr8fekYzjvhy6ottrSkIu2oOi/z7mvzyBRfL/kyb/uwa+wnZHDJorDzFQdIuPjeJmy/5QkT7JeVh6Hw0EzwObcvhbyRRKBBjebwIFIQrVMR1on5p0byEFLJOP7qUC88iBkwPFIC1KCfrFKBcY=