function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{QNcV:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),r=n("UbJi"),a=n("CcaC"),o=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.auth=e,this.userservice=n}return _createClass(t,[{key:"register",value:function(t){var e=this;return new Promise((function(n,i){e.auth.createUserWithEmailAndPassword(t.email,t.password).then((function(i){n(i),e.userservice.persist(i.user.uid,t.title,t.fname,t.lname,t.street,t.housenumber,t.postalcode,t.city,t.email)}),(function(t){return i(t)}))}))}},{key:"login",value:function(t){var e=this;return new Promise((function(n,i){e.auth.signInWithEmailAndPassword(t.email,t.password).then((function(t){return n(t)}),(function(t){return i(t)}))}))}},{key:"checkAuthState",value:function(){return this.auth.authState}},{key:"SignOut",value:function(){return this.auth.signOut()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Tb(r.a),i.Tb(a.a))},t.\u0275prov=i.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},hE1G:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function t(e,n,i,r,a,o,s,c,u,l,h,p,f,g,d,b){_classCallCheck(this,t),this.start=a,this.goal=o,this.date=s,this.startTime=c,this.length=u,this.height=l,this.weight=h,this.pricePerKg=p,this.seat=f,this.pricePerSeat=g,this.cargonaut=e,this.vehicle=n,this.passengerList=i,this.articleList=r,this.id=b,this.status=d}},rawN:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("hE1G"),r=n("lJxs"),a=n("fXoL"),o=n("I/3d"),s=n("CcaC"),c=n("QNcV"),u=function(){var t=function(){function t(e,n,i){_classCallCheck(this,t),this.afs=e,this.userService=n,this.authService=i,this.shipmentCollection=e.collection("shipment")}return _createClass(t,[{key:"persist",value:function(e,n,r,a,o,s,c,u,l,h,p,f,g,d,b){var v=new i.a(e,n,r,a,o,s,c,u,l,h,p,f,g,d,b);return this.shipmentCollection.add(t.prepare(v))}},{key:"update",value:function(e,n,r,a,o,s,c,u,l,h,p,f,g,d,b,v){var m=new i.a(e,n,r,a,o,s,c,u,l,h,p,f,g,d,b,v);return this.shipmentCollection.doc(m.id).update(t.prepare(m))}},{key:"delete",value:function(t){this.shipmentCollection.doc(t).delete()}},{key:"getShipment",value:function(t){return this.shipmentCollection.doc(t).get().pipe(Object(r.a)((function(t){var e=t.data();return e.id=t.id,Object.assign({},e)})))}},{key:"testAll",value:function(){return this.shipmentCollection.snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"testQuery",value:function(){return this.afs.collection("shipment",(function(t){return t.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"searchRoute",value:function(t,e,n,i){return this.afs.collection("shipment",(function(r){return r.where("seat",">=",t).where("goal","==",n).where("start","==",e).where("date","==",i)})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"searchTransport",value:function(t,e,n,i,a){return this.afs.collection("shipment",(function(i){return i.where("start","==",t).where("goal","==",e).where("weight",">=",n)})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"searchBoth",value:function(t,e,n,i){return this.afs.collection("shipment",(function(r){return r.where("start","==",t).where("goal","==",e).where("date","==",n).where("seat",">=",i)})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"getShipments",value:function(t){return this.afs.collection("shipment",(function(e){return e.where("cargonaut","==",t)})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}},{key:"orderQuery",value:function(t){return this.afs.collection("shipment",(function(e){return e.orderBy(t)})).snapshotChanges().pipe(Object(r.a)((function(t){return t.map((function(t){var e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)}))})))}}],[{key:"prepare",value:function(t){var e=Object.assign({},t);return delete e.id,e.start=e.start||null,e.goal=e.goal||null,e.date=e.date||null,e.length=e.length||null,e.height=e.height||null,e.weight=e.weight||null,e.pricePerKg=e.pricePerKg||null,e.seat=e.seat||null,e.cargonaut=e.cargonaut||null,e.pricePerSeat=e.pricePerSeat||null,e.vehicle=e.vehicle||null,e.articleList=e.articleList||null,e.passengerList=e.passengerList||null,e.startTime=e.startTime||null,e.status=e.status||null,e}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Tb(o.a),a.Tb(s.a),a.Tb(c.a))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},vrIs:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchResultPageModule",(function(){return j}));var i,r=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),c=n("mrSG"),u=n("fXoL"),l=n("QNcV"),h=n("rawN"),p=((i=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||i)},i.\u0275prov=u.Gb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),f=n("CcaC"),g=n("B1tq"),d=n("jCsr");function b(t,e){if(1&t){var n=u.Qb();u.Pb(0,"ion-button",11),u.Xb("click",(function(){return u.jc(n),u.Zb().navigateToLogin()})),u.nc(1,"Login"),u.Ob()}}function v(t,e){if(1&t){var n=u.Qb();u.Pb(0,"ion-button",12),u.Xb("click",(function(){return u.jc(n),u.Zb().navigateToRegister()})),u.nc(1,"Registieren"),u.Ob()}}function m(t,e){1&t&&u.Lb(0,"ion-menu-button",13)}function y(t,e){1&t&&u.Lb(0,"app-list-result",14),2&t&&u.ec("shipment",e.$implicit)}var C,O,k,P=[{path:"",component:(C=function(){function t(e,n,i,r,a,o){var s=this;_classCallCheck(this,t),this.authService=e,this.router=n,this.shipmentService=i,this.dataHelper=r,this.route=a,this.userService=o,this.listShipments=[],this.customPopoverOptions={header:"Filter search result",subHeader:"Select your attribute",message:"Only select your favorite flower"},this.route.queryParams.subscribe((function(t){s.router.getCurrentNavigation().extras.state&&(console.log(t),console.log(s.router.getCurrentNavigation().extras.state.shipmentList),s.listShipments=s.router.getCurrentNavigation().extras.state.shipmentList,null!=s.router.getCurrentNavigation().extras.state.article&&(s.article=s.router.getCurrentNavigation().extras.state.article),console.log(s.listShipments))}))}return _createClass(t,[{key:"sortList",value:function(t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.detail.value,e.next="0"===e.t0?3:"1"===e.t0?5:6;break;case 3:return console.log(t.detail.value),this.listShipments.sort((function(t,e){return t.pricePerKg>e.pricePerKg?1:e.pricePerKg>t.pricePerKg?-1:0})),e.abrupt("break",6);case 5:console.log(t.detail.value),this.listShipments.sort((function(t,e){var i=n.getRating(t),r=n.getRating(e);return i<r?-1:i>r?1:0}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getRating",value:function(t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.userService.getUser(t.cargonaut).subscribe((function(t){return Math.round(t.rating)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnInit",value:function(){var t=this;this.subscription=this.authService.checkAuthState().subscribe((function(e){e&&(t.user=e,console.log("Eingeloggt als: "+t.user.uid))})),console.log(this.listShipments)}},{key:"signOut",value:function(){var t=this;this.authService.SignOut().then((function(){t.navigateToLogin()}))}},{key:"navigateToLogin",value:function(){this.router.navigate(["/login"])}},{key:"navigateToRegister",value:function(){this.router.navigate(["/register"])}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"navigateToHome",value:function(){this.router.navigate(["/home"])}}]),t}(),C.\u0275fac=function(t){return new(t||C)(u.Kb(l.a),u.Kb(s.g),u.Kb(h.a),u.Kb(p),u.Kb(s.a),u.Kb(f.a))},C.\u0275cmp=u.Eb({type:C,selectors:[["app-search-result"]],inputs:{shipmentList:"shipmentList"},decls:20,vars:5,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],[3,"click",4,"ngIf"],["id","regBtn",3,"click",4,"ngIf"],["auto-hide","false",4,"ngIf"],["id","ion-content",1,"padding"],["interface","popover","placeholder","Filter...",3,"interfaceOptions","ionChange"],["value","0"],["value","1"],[3,"shipment",4,"ngFor","ngForOf"],[3,"click"],["id","regBtn",3,"click"],["auto-hide","false"],[3,"shipment"]],template:function(t,e){1&t&&(u.Lb(0,"app-menu-header"),u.Pb(1,"div",0),u.Pb(2,"ion-header"),u.Pb(3,"ion-toolbar"),u.Pb(4,"img",1),u.Xb("click",(function(){return e.navigateToHome()})),u.Ob(),u.Pb(5,"ion-buttons",2),u.mc(6,b,2,0,"ion-button",3),u.mc(7,v,2,0,"ion-button",4),u.mc(8,m,1,0,"ion-menu-button",5),u.Ob(),u.Ob(),u.Ob(),u.Pb(9,"ion-content",6),u.Pb(10,"ion-list-header"),u.Pb(11,"ion-label"),u.Pb(12,"ion-text"),u.nc(13," Aktuelle Angebote... "),u.Ob(),u.Ob(),u.Pb(14,"ion-select",7),u.Xb("ionChange",(function(t){return e.sortList(t)})),u.Pb(15,"ion-select-option",8),u.nc(16,"Price"),u.Ob(),u.Pb(17,"ion-select-option",9),u.nc(18,"Rating"),u.Ob(),u.Ob(),u.Ob(),u.mc(19,y,1,1,"app-list-result",10),u.Ob(),u.Ob()),2&t&&(u.Ab(6),u.ec("ngIf",!e.user),u.Ab(1),u.ec("ngIf",!e.user),u.Ab(1),u.ec("ngIf",e.user),u.Ab(6),u.ec("interfaceOptions",e.customPopoverOptions),u.Ab(5),u.ec("ngForOf",e.listShipments))},directives:[g.a,o.t,o.L,o.i,r.j,o.q,o.z,o.x,o.I,o.G,o.U,o.H,r.i,o.h,o.B,d.a],styles:['img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}ion-list[_ngcontent-%COMP%]{margin-top:15px;margin-left:70px;margin-right:70px}.formControl[_ngcontent-%COMP%]{border:2px solid rgba(2,92,83,.9);border-radius:7px;padding-left:1%!important;background-color:#fff}ion-select[_ngcontent-%COMP%]{border-radius:7px;border:2px solid;margin-right:1%}ion-list-header[_ngcontent-%COMP%]{font-size:30px;font-weight:700;color:rgba(2,92,83,.9)}html.ios[_ngcontent-%COMP%]{--ion-default-font:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",sans-serif}html.md[_ngcontent-%COMP%]{--ion-default-font:"Roboto","Helvetica Neue",sans-serif}body.backdrop-no-scroll[_ngcontent-%COMP%]{overflow:hidden}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline}root[_ngcontent-%COMP%]{--ion-safe-area-top:20px;--ion-safe-area-bottom:22px}#regBtn[_ngcontent-%COMP%]{--color:#fff;--background:rgba(2,92,83,0.9)}']}),C)}],w=((O=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:O}),O.\u0275inj=u.Hb({factory:function(t){return new(t||O)},imports:[[s.i.forChild(P)],s.i]}),O),_=n("Uqay"),S=n("/Nyi"),j=((k=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:k}),k.\u0275inj=u.Hb({factory:function(t){return new(t||k)},imports:[[r.b,a.e,o.M,w,_.ListResultPageModule,S.MenuHeaderPageModule]]}),k)}}]);