(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{QNcV:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var i=o("fXoL"),n=o("UbJi"),r=o("CcaC");let a=(()=>{class t{constructor(t,e){this.auth=t,this.userservice=e}register(t){return new Promise((e,o)=>{this.auth.createUserWithEmailAndPassword(t.email,t.password).then(o=>{e(o),this.userservice.persist(o.user.uid,t.title,t.fname,t.lname,t.street,t.housenumber,t.postalcode,t.city,t.email)},t=>o(t))})}login(t){return new Promise((e,o)=>{this.auth.signInWithEmailAndPassword(t.email,t.password).then(t=>e(t),t=>o(t))})}checkAuthState(){return this.auth.authState}SignOut(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(n.a),i.Tb(r.a))},t.\u0275prov=i.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},UEad:function(t,e,o){"use strict";o.r(e),o.d(e,"TransportSearchPageModule",(function(){return M}));var i=o("ofXK"),n=o("3Pt+"),r=o("TEn/"),a=o("tyNb");class s{constructor(t,e,o,i,n,r,a){this.name=t,this.pallet=e,this.amount=o,this.height=i,this.width=n,this.fragile=r,this.weight=a}get client(){return this._client}set client(t){this._client=t}}var c=o("fXoL"),l=o("rawN"),b=o("B1tq");function h(t,e){if(1&t){const t=c.Qb();c.Pb(0,"ion-button",30),c.Xb("click",(function(){return c.jc(t),c.Zb().navigateToLogin()})),c.nc(1,"Login"),c.Ob()}}function d(t,e){if(1&t){const t=c.Qb();c.Pb(0,"ion-button",31),c.Xb("click",(function(){return c.jc(t),c.Zb().navigateToRegister()})),c.nc(1,"Registieren"),c.Ob()}}function p(t,e){1&t&&c.Lb(0,"ion-menu-button",32)}function g(t,e){if(1&t&&(c.Pb(0,"div",34),c.nc(1),c.Ob()),2&t){const t=c.Zb().$implicit;c.Ab(1),c.pc(" ",t.message," ")}}function u(t,e){if(1&t&&(c.Nb(0),c.mc(1,g,2,1,"div",33),c.Mb()),2&t){const t=e.$implicit,o=c.Zb();c.Ab(1),c.ec("ngIf",o.validationsForm.get("postalcode").hasError(t.type)&&(o.validationsForm.get("postalcode").dirty||o.validationsForm.get("postalcode").touched))}}function m(t,e){if(1&t&&(c.Pb(0,"div",34),c.nc(1),c.Ob()),2&t){const t=c.Zb().$implicit;c.Ab(1),c.pc(" ",t.message," ")}}function f(t,e){if(1&t&&(c.Nb(0),c.mc(1,m,2,1,"div",33),c.Mb()),2&t){const t=e.$implicit,o=c.Zb();c.Ab(1),c.ec("ngIf",o.validationsForm.get("postalcode").hasError(t.type)&&(o.validationsForm.get("postalcode").dirty||o.validationsForm.get("postalcode").touched))}}function O(t,e){if(1&t&&(c.Pb(0,"div",34),c.nc(1),c.Ob()),2&t){const t=c.Zb().$implicit;c.Ab(1),c.pc(" ",t.message," ")}}function P(t,e){if(1&t&&(c.Nb(0),c.mc(1,O,2,1,"div",33),c.Mb()),2&t){const t=e.$implicit,o=c.Zb();c.Ab(1),c.ec("ngIf",o.validationsForm.get("postalcode").hasError(t.type)&&(o.validationsForm.get("postalcode").dirty||o.validationsForm.get("postalcode").touched))}}function w(t,e){if(1&t&&(c.Pb(0,"div",34),c.nc(1),c.Ob()),2&t){const t=c.Zb().$implicit;c.Ab(1),c.pc(" ",t.message," ")}}function v(t,e){if(1&t&&(c.Nb(0),c.mc(1,w,2,1,"div",33),c.Mb()),2&t){const t=e.$implicit,o=c.Zb();c.Ab(1),c.ec("ngIf",o.validationsForm.get("postalcode").hasError(t.type)&&(o.validationsForm.get("postalcode").dirty||o.validationsForm.get("postalcode").touched))}}function y(t,e){if(1&t&&(c.Pb(0,"div",34),c.nc(1),c.Ob()),2&t){const t=c.Zb().$implicit;c.Ab(1),c.pc(" ",t.message," ")}}function A(t,e){if(1&t&&(c.Nb(0),c.mc(1,y,2,1,"div",33),c.Mb()),2&t){const t=e.$implicit,o=c.Zb();c.Ab(1),c.ec("ngIf",o.validationsForm.get("postalcode").hasError(t.type)&&(o.validationsForm.get("postalcode").dirty||o.validationsForm.get("postalcode").touched))}}const C=[{path:"",component:(()=>{class t{constructor(t,e,o){this.router=t,this.formBuilder=e,this.shipmentService=o,this.errorMessage="",this.successMessage="",this.shipmentList=[],this.VALIDATION_MESSAGES={postalCode:[{type:"required",message:"Postleitzahl ist erforderlich."},{type:"minlength",message:"Postleitzahl muss mindestens 5 Zahlen enthalten"}],datum:[{type:"required",message:"Datum ist erforderlich."}]}}ngOnInit(){this.validationsForm=this.formBuilder.group({postalcode:new n.b("",n.m.compose([n.m.minLength(5),n.m.required])),startAddress:new n.b(""),toAddress:new n.b(""),article:new n.b(""),weight:new n.b(""),height:new n.b(""),length:new n.b(""),pallet:new n.b(!1),fragile:new n.b(!1)})}search(t){console.log("search called"),console.log("Start Address "+t.startAddress+" toAddress "+t.toAddress+" Article "+t.article+" weight "+t.weight+" height "+t.height+" length "+t.length),this.shipmentService.searchTransport(t.startAddress,t.toAddress,+t.weight,+t.height,+t.length).forEach(e=>{this.shipmentList=e,this.article=new s(t.article,this.pallet,1,t.height,t.width,this.fragile,t.weight),console.log(this.article.weight),this.router.navigate(["/search-result"],{state:{shipmentList:this.shipmentList,article:this.article}}),console.log(e)})}navigateToLogin(){this.router.navigate(["/login"])}navigateToRegister(){this.router.navigate(["/register"])}navigateToHome(){this.router.navigate(["/home"])}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(a.g),c.Kb(n.a),c.Kb(l.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-transport-search"]],decls:84,vars:11,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],[3,"click",4,"ngIf"],["id","regBtn",3,"click",4,"ngIf"],["auto-hide","false",4,"ngIf"],["id","ion-content"],[1,"form",3,"formGroup","ngSubmit"],[1,"heading"],["size","2"],[1,"formRow"],["size","3"],[2,"opacity","revert"],[1,"formControl"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","startAddress"],[1,"validation-errors"],[4,"ngFor","ngForOf"],[2,"opacity","1"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","toAddress"],["type","text","required","","placeholder","Piano, Tisch, Eurpalette... etc.","formControlName","article"],["opacity","1"],["type","number","required","","placeholder","Gewicht in kg","formControlName","weight"],["type","text","required","","placeholder","H\xf6he","formControlName","height"],["type","text","required","","placeholder","Breite","formControlName","length"],[1,"text"],["color","primary","formControlName","pallet",3,"ngModel","ionChange"],["color","primary","formControlName","fragile",3,"ngModel","ionChange"],["size","5"],["expand","block","type","submit",1,"submit-btn"],["size","4"],[3,"click"],["id","regBtn",3,"click"],["auto-hide","false"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,e){1&t&&(c.Lb(0,"app-menu-header"),c.Pb(1,"div",0),c.Pb(2,"ion-header"),c.Pb(3,"ion-toolbar"),c.Pb(4,"img",1),c.Xb("click",(function(){return e.navigateToHome()})),c.Ob(),c.Pb(5,"ion-buttons",2),c.mc(6,h,2,0,"ion-button",3),c.mc(7,d,2,0,"ion-button",4),c.mc(8,p,1,0,"ion-menu-button",5),c.Ob(),c.Ob(),c.Ob(),c.Pb(9,"ion-content",6),c.Pb(10,"ion-grid"),c.Pb(11,"form",7),c.Xb("ngSubmit",(function(){return e.search(e.validationsForm.value)})),c.Pb(12,"ion-row",8),c.Lb(13,"ion-col",9),c.Pb(14,"ion-col"),c.Pb(15,"h1"),c.nc(16,"Art des Transports ausw\xe4hlen"),c.Ob(),c.Ob(),c.Lb(17,"ion-col",9),c.Ob(),c.Pb(18,"ion-row",10),c.Lb(19,"ion-col",11),c.Pb(20,"ion-col"),c.Pb(21,"ion-row"),c.Pb(22,"ion-col"),c.Pb(23,"ion-row"),c.Pb(24,"h3",12),c.nc(25,"von:"),c.Ob(),c.Ob(),c.Pb(26,"ion-row",13),c.Lb(27,"ion-input",14),c.Pb(28,"div",15),c.mc(29,u,2,1,"ng-container",16),c.Ob(),c.Ob(),c.Ob(),c.Pb(30,"ion-col"),c.Pb(31,"ion-row"),c.Pb(32,"h3",17),c.nc(33,"nach:"),c.Ob(),c.Ob(),c.Pb(34,"ion-row",13),c.Lb(35,"ion-input",18),c.Pb(36,"div",15),c.mc(37,f,2,1,"ng-container",16),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(38,"ion-row"),c.Pb(39,"ion-col"),c.Pb(40,"ion-row"),c.Pb(41,"h3",17),c.nc(42,"Zu liefernder Artikel:"),c.Ob(),c.Ob(),c.Pb(43,"ion-row",13),c.Lb(44,"ion-input",19),c.Pb(45,"div",15),c.mc(46,P,2,1,"ng-container",16),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(47,"ion-row"),c.Pb(48,"ion-col"),c.Pb(49,"ion-row"),c.Pb(50,"h3",20),c.nc(51,"Gewicht der Lieferung:"),c.Ob(),c.Ob(),c.Pb(52,"ion-row",13),c.Lb(53,"ion-input",21),c.Ob(),c.Ob(),c.Ob(),c.Pb(54,"ion-row"),c.Pb(55,"ion-col"),c.Pb(56,"ion-row"),c.Pb(57,"h3",12),c.nc(58,"Ma\xdfe der Lieferung"),c.Ob(),c.Ob(),c.Pb(59,"ion-row"),c.Pb(60,"ion-col",13),c.Lb(61,"ion-input",22),c.Pb(62,"div",15),c.mc(63,v,2,1,"ng-container",16),c.Ob(),c.Ob(),c.Pb(64,"ion-col",13),c.Lb(65,"ion-input",23),c.Pb(66,"div",15),c.mc(67,A,2,1,"ng-container",16),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(68,"ion-row"),c.Pb(69,"ion-col"),c.Pb(70,"ion-label",24),c.nc(71,"zerbrechlich"),c.Ob(),c.Pb(72,"ion-checkbox",25),c.Xb("ionChange",(function(){return e.pallet})),c.Ob(),c.Ob(),c.Pb(73,"ion-col"),c.Pb(74,"ion-label",24),c.nc(75,"stapelbar"),c.Ob(),c.Pb(76,"ion-checkbox",26),c.Xb("ionChange",(function(){return e.fragile})),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Lb(77,"ion-col",11),c.Ob(),c.Pb(78,"ion-row"),c.Lb(79,"ion-col",27),c.Pb(80,"ion-col",9),c.Pb(81,"ion-button",28),c.nc(82,"Cargonaut finden!"),c.Ob(),c.Ob(),c.Lb(83,"ion-col",29),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.Ab(6),c.ec("ngIf",!e.user),c.Ab(1),c.ec("ngIf",!e.user),c.Ab(1),c.ec("ngIf",e.user),c.Ab(3),c.ec("formGroup",e.validationsForm),c.Ab(18),c.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),c.Ab(8),c.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),c.Ab(9),c.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),c.Ab(17),c.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),c.Ab(4),c.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),c.Ab(5),c.ec("ngModel",e.pallet),c.Ab(4),c.ec("ngModel",e.fragile))},directives:[b.a,r.t,r.L,r.i,i.j,r.q,r.s,n.n,n.i,n.d,r.F,r.p,r.v,r.V,n.l,n.h,n.c,i.i,r.R,r.x,r.n,r.b,r.h,r.B],styles:["img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}h1[_ngcontent-%COMP%]{color:#fff;font-size:60px}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700}h3[_ngcontent-%COMP%]{color:#fdfdfd}#ion-content[_ngcontent-%COMP%]{--background:url(/assets/Transportart.jpg) no-repeat center/cover}.formRow[_ngcontent-%COMP%]{background:#000;border-radius:20px;margin-left:400px;margin-right:400px;opacity:.7}.formControl[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #d3d3d3;border-radius:7px;padding-left:1%!important}[_ngcontent-%COMP%]:root{--ion-safe-area-top:20px;--ion-safe-area-bottom:22px}.text[_ngcontent-%COMP%]{color:#fff}#regBtn[_ngcontent-%COMP%]{--color:#fff;--background:rgba(2,92,83,0.9)}"]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(C)],a.i]}),t})();var S=o("/Nyi");let M=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[i.b,n.e,r.M,L,n.k,S.MenuHeaderPageModule]]}),t})()},hE1G:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));class i{constructor(t,e,o,i,n,r,a,s,c,l,b,h,d,p,g,u){this.start=n,this.goal=r,this.date=a,this.startTime=s,this.length=c,this.height=l,this.weight=b,this.pricePerKg=h,this.seat=d,this.pricePerSeat=p,this.cargonaut=t,this.vehicle=e,this.passengerList=o,this.articleList=i,this.id=u,this.status=g}}},rawN:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var i=o("hE1G"),n=o("lJxs"),r=o("fXoL"),a=o("I/3d"),s=o("CcaC"),c=o("QNcV");let l=(()=>{class t{constructor(t,e,o){this.afs=t,this.userService=e,this.authService=o,this.shipmentCollection=t.collection("shipment")}static prepare(t){const e=Object.assign({},t);return delete e.id,e.start=e.start||null,e.goal=e.goal||null,e.date=e.date||null,e.length=e.length||null,e.height=e.height||null,e.weight=e.weight||null,e.pricePerKg=e.pricePerKg||null,e.seat=e.seat||null,e.cargonaut=e.cargonaut||null,e.pricePerSeat=e.pricePerSeat||null,e.vehicle=e.vehicle||null,e.articleList=e.articleList||null,e.passengerList=e.passengerList||null,e.startTime=e.startTime||null,e.status=e.status||null,e}persist(e,o,n,r,a,s,c,l,b,h,d,p,g,u,m){const f=new i.a(e,o,n,r,a,s,c,l,b,h,d,p,g,u,m);return this.shipmentCollection.add(t.prepare(f))}update(e,o,n,r,a,s,c,l,b,h,d,p,g,u,m,f){const O=new i.a(e,o,n,r,a,s,c,l,b,h,d,p,g,u,m,f);return this.shipmentCollection.doc(O.id).update(t.prepare(O))}delete(t){this.shipmentCollection.doc(t).delete()}getShipment(t){return this.shipmentCollection.doc(t).get().pipe(Object(n.a)(t=>{const e=t.data();return e.id=t.id,Object.assign({},e)}))}testAll(){return this.shipmentCollection.snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}testQuery(){return this.afs.collection("shipment",t=>t.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchRoute(t,e,o,i){return this.afs.collection("shipment",n=>n.where("seat",">=",t).where("goal","==",o).where("start","==",e).where("date","==",i)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchTransport(t,e,o,i,r){return this.afs.collection("shipment",i=>i.where("start","==",t).where("goal","==",e).where("weight",">=",o)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchBoth(t,e,o,i){return this.afs.collection("shipment",n=>n.where("start","==",t).where("goal","==",e).where("date","==",o).where("seat",">=",i)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}getShipments(t){return this.afs.collection("shipment",e=>e.where("cargonaut","==",t)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}orderQuery(t){return this.afs.collection("shipment",e=>e.orderBy(t)).snapshotChanges().pipe(Object(n.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(a.a),r.Tb(s.a),r.Tb(c.a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);