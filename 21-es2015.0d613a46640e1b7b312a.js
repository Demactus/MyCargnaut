(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{GMKT:function(t,e,n){"use strict";n.r(e),n.d(e,"RouteSearchPageModule",(function(){return y}));var o=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),a=n("fXoL"),c=n("I/3d"),l=n("rawN"),h=n("QNcV"),d=n("B1tq");function u(t,e){if(1&t){const t=a.Qb();a.Pb(0,"ion-button",22),a.Xb("click",(function(){return a.jc(t),a.Zb().navigateToLogin()})),a.nc(1,"Login"),a.Ob()}}function b(t,e){if(1&t){const t=a.Qb();a.Pb(0,"ion-button",23),a.Xb("click",(function(){return a.jc(t),a.Zb().navigateToRegister()})),a.nc(1,"Registieren"),a.Ob()}}function p(t,e){1&t&&a.Lb(0,"ion-menu-button",24)}function g(t,e){if(1&t&&(a.Pb(0,"div",26),a.nc(1),a.Ob()),2&t){const t=a.Zb().$implicit;a.Ab(1),a.pc(" ",t.message," ")}}function m(t,e){if(1&t&&(a.Nb(0),a.mc(1,g,2,1,"div",25),a.Mb()),2&t){const t=e.$implicit,n=a.Zb();a.Ab(1),a.ec("ngIf",n.validationsForm.get("postalcode").hasError(t.type)&&(n.validationsForm.get("postalcode").dirty||n.validationsForm.get("postalcode").touched))}}function f(t,e){if(1&t&&(a.Pb(0,"div",26),a.nc(1),a.Ob()),2&t){const t=a.Zb().$implicit;a.Ab(1),a.pc(" ",t.message," ")}}function O(t,e){if(1&t&&(a.Nb(0),a.mc(1,f,2,1,"div",25),a.Mb()),2&t){const t=e.$implicit,n=a.Zb();a.Ab(1),a.ec("ngIf",n.validationsForm.get("postalcode").hasError(t.type)&&(n.validationsForm.get("postalcode").dirty||n.validationsForm.get("postalcode").touched))}}const P=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.firestore=t,this.formBuilder=e,this.router=n,this.shipmentService=o,this.authService=i,this.errorMessage="",this.successMessage="",this.shipmentList=[],this.VALIDATION_MESSAGES={postalCode:[{type:"required",message:"Postleitzahl ist erforderlich."},{type:"minlength",message:"Postleitzahl muss mindestens 5 Zahlen enthalten"}],datum:[{type:"required",message:"Datum ist erforderlich."}]},this.subscription=this.authService.checkAuthState().subscribe(t=>{t&&(this.user=t)})}ngOnInit(){this.validationsForm=this.formBuilder.group({postalcode:new i.b("",i.m.compose([i.m.minLength(5),i.m.required])),seats:new i.b(""),startAddress:new i.b(""),toAddress:new i.b(""),date:new i.b("")})}search(t){console.log("search called"),console.log(" StartAddress "+t.startAddress+" toAddress "+t.toAddress+" Date "+t.date),this.shipmentService.searchRoute(1,t.startAddress,t.toAddress,t.date).forEach(t=>{this.shipmentList=t,this.router.navigate(["search-result"],{state:{shipmentList:this.shipmentList}}),console.log(t)}),this.shipmentService.testAll().forEach(t=>{console.log(t)})}query(t){this.shipmentService.searchRoute(1,t.startAddress,t.toAddress,t.date).forEach(t=>{this.shipmentList=t,console.log(t)})}navigateToLogin(){this.router.navigate(["/login"])}navigateToRegister(){this.router.navigate(["/register"])}navigateToHome(){this.router.navigate(["/home"])}signOut(){this.authService.SignOut().then(()=>{this.navigateToLogin()})}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(c.a),a.Kb(i.a),a.Kb(r.g),a.Kb(l.a),a.Kb(h.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-route-search"]],decls:53,vars:6,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],[3,"click",4,"ngIf"],["id","regBtn",3,"click",4,"ngIf"],["auto-hide","false",4,"ngIf"],["id","ion-content"],[1,"heading"],["size","4"],[1,"formRow"],[1,"form",3,"formGroup","ngSubmit"],["size","1"],[2,"opacity","revert"],[1,"formControl"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","startAddress"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","toAddress"],["type","text","required","","placeholder","YYYY-MM-DD","formControlName","date"],["size","5"],["size","2"],["type","submit","expand","block",1,"submit-btn"],[3,"click"],["id","regBtn",3,"click"],["auto-hide","false"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,e){1&t&&(a.Lb(0,"app-menu-header"),a.Pb(1,"div",0),a.Pb(2,"ion-header"),a.Pb(3,"ion-toolbar"),a.Pb(4,"img",1),a.Xb("click",(function(){return e.navigateToHome()})),a.Ob(),a.Pb(5,"ion-buttons",2),a.mc(6,u,2,0,"ion-button",3),a.mc(7,b,2,0,"ion-button",4),a.mc(8,p,1,0,"ion-menu-button",5),a.Ob(),a.Ob(),a.Ob(),a.Pb(9,"ion-content",6),a.Pb(10,"ion-grid"),a.Pb(11,"ion-row",7),a.Lb(12,"ion-col",8),a.Pb(13,"ion-col"),a.Pb(14,"h1"),a.nc(15,"Reise per Cargonaut"),a.Ob(),a.Ob(),a.Lb(16,"ion-col",8),a.Ob(),a.Pb(17,"ion-row",9),a.Pb(18,"ion-col"),a.Pb(19,"form",10),a.Xb("ngSubmit",(function(){return e.search(e.validationsForm.value)})),a.Pb(20,"ion-row"),a.Lb(21,"ion-col",11),a.Pb(22,"ion-col"),a.Pb(23,"ion-row"),a.Pb(24,"h3",12),a.nc(25,"von:"),a.Ob(),a.Ob(),a.Pb(26,"ion-row",13),a.Lb(27,"ion-input",14),a.Pb(28,"div",15),a.mc(29,m,2,1,"ng-container",16),a.Ob(),a.Ob(),a.Ob(),a.Lb(30,"ion-col",11),a.Pb(31,"ion-col"),a.Pb(32,"ion-row"),a.Pb(33,"h3",12),a.nc(34,"nach:"),a.Ob(),a.Ob(),a.Pb(35,"ion-row",13),a.Lb(36,"ion-input",17),a.Pb(37,"div",15),a.mc(38,O,2,1,"ng-container",16),a.Ob(),a.Ob(),a.Ob(),a.Lb(39,"ion-col",11),a.Pb(40,"ion-col"),a.Pb(41,"ion-row"),a.Pb(42,"h3",12),a.nc(43,"Datum:"),a.Ob(),a.Ob(),a.Pb(44,"ion-row",13),a.Lb(45,"ion-input",18),a.Ob(),a.Ob(),a.Lb(46,"ion-col",11),a.Ob(),a.Pb(47,"ion-row"),a.Lb(48,"ion-col",19),a.Pb(49,"ion-col",20),a.Pb(50,"ion-button",21),a.nc(51,"Route suchen"),a.Ob(),a.Ob(),a.Lb(52,"ion-col",8),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.Ab(6),a.ec("ngIf",!e.user),a.Ab(1),a.ec("ngIf",!e.user),a.Ab(1),a.ec("ngIf",e.user),a.Ab(11),a.ec("formGroup",e.validationsForm),a.Ab(10),a.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode),a.Ab(9),a.ec("ngForOf",e.VALIDATION_MESSAGES.postalCode))},directives:[d.a,s.t,s.L,s.i,o.j,s.q,s.s,s.F,s.p,i.n,i.i,i.d,s.v,s.V,i.l,i.h,i.c,o.i,s.h,s.B],styles:["img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}h1[_ngcontent-%COMP%]{color:#fff;font-size:50px}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700}h3[_ngcontent-%COMP%]{color:#fdfdfd}#ion-content[_ngcontent-%COMP%]{--background:url(/assets/Reise.jpg) no-repeat center center/cover}.heading[_ngcontent-%COMP%]{margin-top:110px}.formRow[_ngcontent-%COMP%]{background:#000;border-radius:20px;margin-top:30px;margin-left:60px;margin-right:60px;opacity:.7}.formControl[_ngcontent-%COMP%]{border:2px solid #d3d3d3;border-radius:7px;padding-left:1%!important;background-color:#fff}#regBtn[_ngcontent-%COMP%]{--color:#fff;--background:rgba(2,92,83,0.9)}#list[_ngcontent-%COMP%]{display:flex}#impItem[_ngcontent-%COMP%]{align-self:flex-end}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(P)],r.i]}),t})();var v=n("/Nyi");let y=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.b,i.e,s.M,w,i.k,v.MenuHeaderPageModule]]}),t})()},QNcV:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("fXoL"),i=n("UbJi"),s=n("CcaC");let r=(()=>{class t{constructor(t,e){this.auth=t,this.userservice=e}register(t){return new Promise((e,n)=>{this.auth.createUserWithEmailAndPassword(t.email,t.password).then(n=>{e(n),this.userservice.persist(n.user.uid,t.title,t.fname,t.lname,t.street,t.housenumber,t.postalcode,t.city,t.email)},t=>n(t))})}login(t){return new Promise((e,n)=>{this.auth.signInWithEmailAndPassword(t.email,t.password).then(t=>e(t),t=>n(t))})}checkAuthState(){return this.auth.authState}SignOut(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(i.a),o.Tb(s.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},hE1G:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));class o{constructor(t,e,n,o,i,s,r,a,c,l,h,d,u,b,p,g){this.start=i,this.goal=s,this.date=r,this.startTime=a,this.length=c,this.height=l,this.weight=h,this.pricePerKg=d,this.seat=u,this.pricePerSeat=b,this.cargonaut=t,this.vehicle=e,this.passengerList=n,this.articleList=o,this.id=g,this.status=p}}},rawN:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("hE1G"),i=n("lJxs"),s=n("fXoL"),r=n("I/3d"),a=n("CcaC"),c=n("QNcV");let l=(()=>{class t{constructor(t,e,n){this.afs=t,this.userService=e,this.authService=n,this.shipmentCollection=t.collection("shipment")}static prepare(t){const e=Object.assign({},t);return delete e.id,e.start=e.start||null,e.goal=e.goal||null,e.date=e.date||null,e.length=e.length||null,e.height=e.height||null,e.weight=e.weight||null,e.pricePerKg=e.pricePerKg||null,e.seat=e.seat||null,e.cargonaut=e.cargonaut||null,e.pricePerSeat=e.pricePerSeat||null,e.vehicle=e.vehicle||null,e.articleList=e.articleList||null,e.passengerList=e.passengerList||null,e.startTime=e.startTime||null,e.status=e.status||null,e}persist(e,n,i,s,r,a,c,l,h,d,u,b,p,g,m){const f=new o.a(e,n,i,s,r,a,c,l,h,d,u,b,p,g,m);return this.shipmentCollection.add(t.prepare(f))}update(e,n,i,s,r,a,c,l,h,d,u,b,p,g,m,f){const O=new o.a(e,n,i,s,r,a,c,l,h,d,u,b,p,g,m,f);return this.shipmentCollection.doc(O.id).update(t.prepare(O))}delete(t){this.shipmentCollection.doc(t).delete()}getShipment(t){return this.shipmentCollection.doc(t).get().pipe(Object(i.a)(t=>{const e=t.data();return e.id=t.id,Object.assign({},e)}))}testAll(){return this.shipmentCollection.snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}testQuery(){return this.afs.collection("shipment",t=>t.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchRoute(t,e,n,o){return this.afs.collection("shipment",i=>i.where("seat",">=",t).where("goal","==",n).where("start","==",e).where("date","==",o)).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchTransport(t,e,n,o,s){return this.afs.collection("shipment",o=>o.where("start","==",t).where("goal","==",e).where("weight",">=",n)).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchBoth(t,e,n,o){return this.afs.collection("shipment",i=>i.where("start","==",t).where("goal","==",e).where("date","==",n).where("seat",">=",o)).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}getShipments(t){return this.afs.collection("shipment",e=>e.where("cargonaut","==",t)).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}orderQuery(t){return this.afs.collection("shipment",e=>e.orderBy(t)).snapshotChanges().pipe(Object(i.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}}return t.\u0275fac=function(e){return new(e||t)(s.Tb(r.a),s.Tb(a.a),s.Tb(c.a))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);