function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{GMKT:function(e,t,n){"use strict";n.r(t),n.d(t,"RouteSearchPageModule",(function(){return L}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),s=n("fXoL"),c=n("I/3d"),u=n("rawN"),l=n("QNcV"),h=n("B1tq");function d(e,t){if(1&e){var n=s.Qb();s.Pb(0,"ion-button",22),s.Xb("click",(function(){return s.jc(n),s.Zb().navigateToLogin()})),s.nc(1,"Login"),s.Ob()}}function b(e,t){if(1&e){var n=s.Qb();s.Pb(0,"ion-button",23),s.Xb("click",(function(){return s.jc(n),s.Zb().navigateToRegister()})),s.nc(1,"Registieren"),s.Ob()}}function f(e,t){1&e&&s.Lb(0,"ion-menu-button",24)}function p(e,t){if(1&e&&(s.Pb(0,"div",26),s.nc(1),s.Ob()),2&e){var n=s.Zb().$implicit;s.Ab(1),s.pc(" ",n.message," ")}}function g(e,t){if(1&e&&(s.Nb(0),s.mc(1,p,2,1,"div",25),s.Mb()),2&e){var n=t.$implicit,i=s.Zb();s.Ab(1),s.ec("ngIf",i.validationsForm.get("postalcode").hasError(n.type)&&(i.validationsForm.get("postalcode").dirty||i.validationsForm.get("postalcode").touched))}}function m(e,t){if(1&e&&(s.Pb(0,"div",26),s.nc(1),s.Ob()),2&e){var n=s.Zb().$implicit;s.Ab(1),s.pc(" ",n.message," ")}}function v(e,t){if(1&e&&(s.Nb(0),s.mc(1,m,2,1,"div",25),s.Mb()),2&e){var n=t.$implicit,i=s.Zb();s.Ab(1),s.ec("ngIf",i.validationsForm.get("postalcode").hasError(n.type)&&(i.validationsForm.get("postalcode").dirty||i.validationsForm.get("postalcode").touched))}}var O,y,P,w=[{path:"",component:(O=function(){function e(t,n,i,o,r){var a=this;_classCallCheck(this,e),this.firestore=t,this.formBuilder=n,this.router=i,this.shipmentService=o,this.authService=r,this.errorMessage="",this.successMessage="",this.shipmentList=[],this.VALIDATION_MESSAGES={postalCode:[{type:"required",message:"Postleitzahl ist erforderlich."},{type:"minlength",message:"Postleitzahl muss mindestens 5 Zahlen enthalten"}],datum:[{type:"required",message:"Datum ist erforderlich."}]},this.subscription=this.authService.checkAuthState().subscribe((function(e){e&&(a.user=e)}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.validationsForm=this.formBuilder.group({postalcode:new o.b("",o.m.compose([o.m.minLength(5),o.m.required])),seats:new o.b(""),startAddress:new o.b(""),toAddress:new o.b(""),date:new o.b("")})}},{key:"search",value:function(e){var t=this;console.log("search called"),console.log(" StartAddress "+e.startAddress+" toAddress "+e.toAddress+" Date "+e.date),this.shipmentService.searchRoute(1,e.startAddress,e.toAddress,e.date).forEach((function(e){t.shipmentList=e,t.router.navigate(["search-result"],{state:{shipmentList:t.shipmentList}}),console.log(e)})),this.shipmentService.testAll().forEach((function(e){console.log(e)}))}},{key:"query",value:function(e){var t=this;this.shipmentService.searchRoute(1,e.startAddress,e.toAddress,e.date).forEach((function(e){t.shipmentList=e,console.log(e)}))}},{key:"navigateToLogin",value:function(){this.router.navigate(["/login"])}},{key:"navigateToRegister",value:function(){this.router.navigate(["/register"])}},{key:"navigateToHome",value:function(){this.router.navigate(["/home"])}},{key:"signOut",value:function(){var e=this;this.authService.SignOut().then((function(){e.navigateToLogin()}))}}]),e}(),O.\u0275fac=function(e){return new(e||O)(s.Kb(c.a),s.Kb(o.a),s.Kb(a.g),s.Kb(u.a),s.Kb(l.a))},O.\u0275cmp=s.Eb({type:O,selectors:[["app-route-search"]],decls:53,vars:6,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],[3,"click",4,"ngIf"],["id","regBtn",3,"click",4,"ngIf"],["auto-hide","false",4,"ngIf"],["id","ion-content"],[1,"heading"],["size","4"],[1,"formRow"],[1,"form",3,"formGroup","ngSubmit"],["size","1"],[2,"opacity","revert"],[1,"formControl"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","startAddress"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","text","required","","placeholder","Stadt, PLZ","formControlName","toAddress"],["type","text","required","","placeholder","YYYY-MM-DD","formControlName","date"],["size","5"],["size","2"],["type","submit","expand","block",1,"submit-btn"],[3,"click"],["id","regBtn",3,"click"],["auto-hide","false"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(s.Lb(0,"app-menu-header"),s.Pb(1,"div",0),s.Pb(2,"ion-header"),s.Pb(3,"ion-toolbar"),s.Pb(4,"img",1),s.Xb("click",(function(){return t.navigateToHome()})),s.Ob(),s.Pb(5,"ion-buttons",2),s.mc(6,d,2,0,"ion-button",3),s.mc(7,b,2,0,"ion-button",4),s.mc(8,f,1,0,"ion-menu-button",5),s.Ob(),s.Ob(),s.Ob(),s.Pb(9,"ion-content",6),s.Pb(10,"ion-grid"),s.Pb(11,"ion-row",7),s.Lb(12,"ion-col",8),s.Pb(13,"ion-col"),s.Pb(14,"h1"),s.nc(15,"Reise per Cargonaut"),s.Ob(),s.Ob(),s.Lb(16,"ion-col",8),s.Ob(),s.Pb(17,"ion-row",9),s.Pb(18,"ion-col"),s.Pb(19,"form",10),s.Xb("ngSubmit",(function(){return t.search(t.validationsForm.value)})),s.Pb(20,"ion-row"),s.Lb(21,"ion-col",11),s.Pb(22,"ion-col"),s.Pb(23,"ion-row"),s.Pb(24,"h3",12),s.nc(25,"von:"),s.Ob(),s.Ob(),s.Pb(26,"ion-row",13),s.Lb(27,"ion-input",14),s.Pb(28,"div",15),s.mc(29,g,2,1,"ng-container",16),s.Ob(),s.Ob(),s.Ob(),s.Lb(30,"ion-col",11),s.Pb(31,"ion-col"),s.Pb(32,"ion-row"),s.Pb(33,"h3",12),s.nc(34,"nach:"),s.Ob(),s.Ob(),s.Pb(35,"ion-row",13),s.Lb(36,"ion-input",17),s.Pb(37,"div",15),s.mc(38,v,2,1,"ng-container",16),s.Ob(),s.Ob(),s.Ob(),s.Lb(39,"ion-col",11),s.Pb(40,"ion-col"),s.Pb(41,"ion-row"),s.Pb(42,"h3",12),s.nc(43,"Datum:"),s.Ob(),s.Ob(),s.Pb(44,"ion-row",13),s.Lb(45,"ion-input",18),s.Ob(),s.Ob(),s.Lb(46,"ion-col",11),s.Ob(),s.Pb(47,"ion-row"),s.Lb(48,"ion-col",19),s.Pb(49,"ion-col",20),s.Pb(50,"ion-button",21),s.nc(51,"Route suchen"),s.Ob(),s.Ob(),s.Lb(52,"ion-col",8),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.Ab(6),s.ec("ngIf",!t.user),s.Ab(1),s.ec("ngIf",!t.user),s.Ab(1),s.ec("ngIf",t.user),s.Ab(11),s.ec("formGroup",t.validationsForm),s.Ab(10),s.ec("ngForOf",t.VALIDATION_MESSAGES.postalCode),s.Ab(9),s.ec("ngForOf",t.VALIDATION_MESSAGES.postalCode))},directives:[h.a,r.t,r.L,r.i,i.j,r.q,r.s,r.F,r.p,o.n,o.i,o.d,r.v,r.V,o.l,o.h,o.c,i.i,r.h,r.B],styles:["img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}h1[_ngcontent-%COMP%]{color:#fff;font-size:50px}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700}h3[_ngcontent-%COMP%]{color:#fdfdfd}#ion-content[_ngcontent-%COMP%]{--background:url(/assets/Reise.jpg) no-repeat center center/cover}.heading[_ngcontent-%COMP%]{margin-top:110px}.formRow[_ngcontent-%COMP%]{background:#000;border-radius:20px;margin-top:30px;margin-left:60px;margin-right:60px;opacity:.7}.formControl[_ngcontent-%COMP%]{border:2px solid #d3d3d3;border-radius:7px;padding-left:1%!important;background-color:#fff}#regBtn[_ngcontent-%COMP%]{--color:#fff;--background:rgba(2,92,83,0.9)}#list[_ngcontent-%COMP%]{display:flex}#impItem[_ngcontent-%COMP%]{align-self:flex-end}"]}),O)}],C=((y=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:y}),y.\u0275inj=s.Hb({factory:function(e){return new(e||y)},imports:[[a.i.forChild(w)],a.i]}),y),k=n("/Nyi"),L=((P=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:P}),P.\u0275inj=s.Hb({factory:function(e){return new(e||P)},imports:[[i.b,o.e,r.M,C,o.k,k.MenuHeaderPageModule]]}),P)},QNcV:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),o=n("UbJi"),r=n("CcaC"),a=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.userservice=n}return _createClass(e,[{key:"register",value:function(e){var t=this;return new Promise((function(n,i){t.auth.createUserWithEmailAndPassword(e.email,e.password).then((function(i){n(i),t.userservice.persist(i.user.uid,e.title,e.fname,e.lname,e.street,e.housenumber,e.postalcode,e.city,e.email)}),(function(e){return i(e)}))}))}},{key:"login",value:function(e){var t=this;return new Promise((function(n,i){t.auth.signInWithEmailAndPassword(e.email,e.password).then((function(e){return n(e)}),(function(e){return i(e)}))}))}},{key:"checkAuthState",value:function(){return this.auth.authState}},{key:"SignOut",value:function(){return this.auth.signOut()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Tb(o.a),i.Tb(r.a))},e.\u0275prov=i.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},hE1G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(t,n,i,o,r,a,s,c,u,l,h,d,b,f,p,g){_classCallCheck(this,e),this.start=r,this.goal=a,this.date=s,this.startTime=c,this.length=u,this.height=l,this.weight=h,this.pricePerKg=d,this.seat=b,this.pricePerSeat=f,this.cargonaut=t,this.vehicle=n,this.passengerList=i,this.articleList=o,this.id=g,this.status=p}},rawN:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("hE1G"),o=n("lJxs"),r=n("fXoL"),a=n("I/3d"),s=n("CcaC"),c=n("QNcV"),u=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.afs=t,this.userService=n,this.authService=i,this.shipmentCollection=t.collection("shipment")}return _createClass(e,[{key:"persist",value:function(t,n,o,r,a,s,c,u,l,h,d,b,f,p,g){var m=new i.a(t,n,o,r,a,s,c,u,l,h,d,b,f,p,g);return this.shipmentCollection.add(e.prepare(m))}},{key:"update",value:function(t,n,o,r,a,s,c,u,l,h,d,b,f,p,g,m){var v=new i.a(t,n,o,r,a,s,c,u,l,h,d,b,f,p,g,m);return this.shipmentCollection.doc(v.id).update(e.prepare(v))}},{key:"delete",value:function(e){this.shipmentCollection.doc(e).delete()}},{key:"getShipment",value:function(e){return this.shipmentCollection.doc(e).get().pipe(Object(o.a)((function(e){var t=e.data();return t.id=e.id,Object.assign({},t)})))}},{key:"testAll",value:function(){return this.shipmentCollection.snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"testQuery",value:function(){return this.afs.collection("shipment",(function(e){return e.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"searchRoute",value:function(e,t,n,i){return this.afs.collection("shipment",(function(o){return o.where("seat",">=",e).where("goal","==",n).where("start","==",t).where("date","==",i)})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"searchTransport",value:function(e,t,n,i,r){return this.afs.collection("shipment",(function(i){return i.where("start","==",e).where("goal","==",t).where("weight",">=",n)})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"searchBoth",value:function(e,t,n,i){return this.afs.collection("shipment",(function(o){return o.where("start","==",e).where("goal","==",t).where("date","==",n).where("seat",">=",i)})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"getShipments",value:function(e){return this.afs.collection("shipment",(function(t){return t.where("cargonaut","==",e)})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}},{key:"orderQuery",value:function(e){return this.afs.collection("shipment",(function(t){return t.orderBy(e)})).snapshotChanges().pipe(Object(o.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t.id=e.payload.doc.id,Object.assign({},t)}))})))}}],[{key:"prepare",value:function(e){var t=Object.assign({},e);return delete t.id,t.start=t.start||null,t.goal=t.goal||null,t.date=t.date||null,t.length=t.length||null,t.height=t.height||null,t.weight=t.weight||null,t.pricePerKg=t.pricePerKg||null,t.seat=t.seat||null,t.cargonaut=t.cargonaut||null,t.pricePerSeat=t.pricePerSeat||null,t.vehicle=t.vehicle||null,t.articleList=t.articleList||null,t.passengerList=t.passengerList||null,t.startTime=t.startTime||null,t.status=t.status||null,t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(a.a),r.Tb(s.a),r.Tb(c.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);