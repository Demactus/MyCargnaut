(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{QNcV:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),s=n("UbJi"),r=n("CcaC");let o=(()=>{class t{constructor(t,e){this.auth=t,this.userservice=e}register(t){return new Promise((e,n)=>{this.auth.createUserWithEmailAndPassword(t.email,t.password).then(n=>{e(n),this.userservice.persist(n.user.uid,t.title,t.fname,t.lname,t.street,t.housenumber,t.postalcode,t.city,t.email)},t=>n(t))})}login(t){return new Promise((e,n)=>{this.auth.signInWithEmailAndPassword(t.email,t.password).then(t=>e(t),t=>n(t))})}checkAuthState(){return this.auth.authState}SignOut(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(s.a),i.Tb(r.a))},t.\u0275prov=i.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},hE1G:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t,e,n,i,s,r,o,a,c,l,u,h,p,g,d,b){this.start=s,this.goal=r,this.date=o,this.startTime=a,this.length=c,this.height=l,this.weight=u,this.pricePerKg=h,this.seat=p,this.pricePerSeat=g,this.cargonaut=t,this.vehicle=e,this.passengerList=n,this.articleList=i,this.id=b,this.status=d}}},rawN:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("hE1G"),s=n("lJxs"),r=n("fXoL"),o=n("I/3d"),a=n("CcaC"),c=n("QNcV");let l=(()=>{class t{constructor(t,e,n){this.afs=t,this.userService=e,this.authService=n,this.shipmentCollection=t.collection("shipment")}static prepare(t){const e=Object.assign({},t);return delete e.id,e.start=e.start||null,e.goal=e.goal||null,e.date=e.date||null,e.length=e.length||null,e.height=e.height||null,e.weight=e.weight||null,e.pricePerKg=e.pricePerKg||null,e.seat=e.seat||null,e.cargonaut=e.cargonaut||null,e.pricePerSeat=e.pricePerSeat||null,e.vehicle=e.vehicle||null,e.articleList=e.articleList||null,e.passengerList=e.passengerList||null,e.startTime=e.startTime||null,e.status=e.status||null,e}persist(e,n,s,r,o,a,c,l,u,h,p,g,d,b,m){const f=new i.a(e,n,s,r,o,a,c,l,u,h,p,g,d,b,m);return this.shipmentCollection.add(t.prepare(f))}update(e,n,s,r,o,a,c,l,u,h,p,g,d,b,m,f){const v=new i.a(e,n,s,r,o,a,c,l,u,h,p,g,d,b,m,f);return this.shipmentCollection.doc(v.id).update(t.prepare(v))}delete(t){this.shipmentCollection.doc(t).delete()}getShipment(t){return this.shipmentCollection.doc(t).get().pipe(Object(s.a)(t=>{const e=t.data();return e.id=t.id,Object.assign({},e)}))}testAll(){return this.shipmentCollection.snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}testQuery(){return this.afs.collection("shipment",t=>t.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchRoute(t,e,n,i){return this.afs.collection("shipment",s=>s.where("seat",">=",t).where("goal","==",n).where("start","==",e).where("date","==",i)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchTransport(t,e,n,i,r){return this.afs.collection("shipment",i=>i.where("start","==",t).where("goal","==",e).where("weight",">=",n)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchBoth(t,e,n,i){return this.afs.collection("shipment",s=>s.where("start","==",t).where("goal","==",e).where("date","==",n).where("seat",">=",i)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}getShipments(t){return this.afs.collection("shipment",e=>e.where("cargonaut","==",t)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}orderQuery(t){return this.afs.collection("shipment",e=>e.orderBy(t)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(o.a),r.Tb(a.a),r.Tb(c.a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vrIs:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchResultPageModule",(function(){return y}));var i=n("ofXK"),s=n("3Pt+"),r=n("TEn/"),o=n("tyNb"),a=n("mrSG"),c=n("fXoL"),l=n("QNcV"),u=n("rawN");let h=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("CcaC"),g=n("B1tq"),d=n("jCsr");function b(t,e){if(1&t){const t=c.Qb();c.Pb(0,"ion-button",11),c.Xb("click",(function(){return c.jc(t),c.Zb().navigateToLogin()})),c.nc(1,"Login"),c.Ob()}}function m(t,e){if(1&t){const t=c.Qb();c.Pb(0,"ion-button",12),c.Xb("click",(function(){return c.jc(t),c.Zb().navigateToRegister()})),c.nc(1,"Registieren"),c.Ob()}}function f(t,e){1&t&&c.Lb(0,"ion-menu-button",13)}function v(t,e){1&t&&c.Lb(0,"app-list-result",14),2&t&&c.ec("shipment",e.$implicit)}const O=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s,r){this.authService=t,this.router=e,this.shipmentService=n,this.dataHelper=i,this.route=s,this.userService=r,this.listShipments=[],this.customPopoverOptions={header:"Filter search result",subHeader:"Select your attribute",message:"Only select your favorite flower"},this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(console.log(t),console.log(this.router.getCurrentNavigation().extras.state.shipmentList),this.listShipments=this.router.getCurrentNavigation().extras.state.shipmentList,null!=this.router.getCurrentNavigation().extras.state.article&&(this.article=this.router.getCurrentNavigation().extras.state.article),console.log(this.listShipments))})}sortList(t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){switch(t.detail.value){case"0":console.log(t.detail.value),this.listShipments.sort((t,e)=>t.pricePerKg>e.pricePerKg?1:e.pricePerKg>t.pricePerKg?-1:0);break;case"1":console.log(t.detail.value),this.listShipments.sort((t,e)=>{const n=this.getRating(t),i=this.getRating(e);return n<i?-1:n>i?1:0})}}))}getRating(t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){this.userService.getUser(t.cargonaut).subscribe(t=>Math.round(t.rating))}))}ngOnInit(){this.subscription=this.authService.checkAuthState().subscribe(t=>{t&&(this.user=t,console.log("Eingeloggt als: "+this.user.uid))}),console.log(this.listShipments)}signOut(){this.authService.SignOut().then(()=>{this.navigateToLogin()})}navigateToLogin(){this.router.navigate(["/login"])}navigateToRegister(){this.router.navigate(["/register"])}ngOnDestroy(){this.subscription.unsubscribe()}navigateToHome(){this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(l.a),c.Kb(o.g),c.Kb(u.a),c.Kb(h),c.Kb(o.a),c.Kb(p.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-search-result"]],inputs:{shipmentList:"shipmentList"},decls:20,vars:5,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],[3,"click",4,"ngIf"],["id","regBtn",3,"click",4,"ngIf"],["auto-hide","false",4,"ngIf"],["id","ion-content",1,"padding"],["interface","popover","placeholder","Filter...",3,"interfaceOptions","ionChange"],["value","0"],["value","1"],[3,"shipment",4,"ngFor","ngForOf"],[3,"click"],["id","regBtn",3,"click"],["auto-hide","false"],[3,"shipment"]],template:function(t,e){1&t&&(c.Lb(0,"app-menu-header"),c.Pb(1,"div",0),c.Pb(2,"ion-header"),c.Pb(3,"ion-toolbar"),c.Pb(4,"img",1),c.Xb("click",(function(){return e.navigateToHome()})),c.Ob(),c.Pb(5,"ion-buttons",2),c.mc(6,b,2,0,"ion-button",3),c.mc(7,m,2,0,"ion-button",4),c.mc(8,f,1,0,"ion-menu-button",5),c.Ob(),c.Ob(),c.Ob(),c.Pb(9,"ion-content",6),c.Pb(10,"ion-list-header"),c.Pb(11,"ion-label"),c.Pb(12,"ion-text"),c.nc(13," Aktuelle Angebote... "),c.Ob(),c.Ob(),c.Pb(14,"ion-select",7),c.Xb("ionChange",(function(t){return e.sortList(t)})),c.Pb(15,"ion-select-option",8),c.nc(16,"Price"),c.Ob(),c.Pb(17,"ion-select-option",9),c.nc(18,"Rating"),c.Ob(),c.Ob(),c.Ob(),c.mc(19,v,1,1,"app-list-result",10),c.Ob(),c.Ob()),2&t&&(c.Ab(6),c.ec("ngIf",!e.user),c.Ab(1),c.ec("ngIf",!e.user),c.Ab(1),c.ec("ngIf",e.user),c.Ab(6),c.ec("interfaceOptions",e.customPopoverOptions),c.Ab(5),c.ec("ngForOf",e.listShipments))},directives:[g.a,r.t,r.L,r.i,i.j,r.q,r.z,r.x,r.I,r.G,r.U,r.H,i.i,r.h,r.B,d.a],styles:['img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}ion-list[_ngcontent-%COMP%]{margin-top:15px;margin-left:70px;margin-right:70px}.formControl[_ngcontent-%COMP%]{border:2px solid rgba(2,92,83,.9);border-radius:7px;padding-left:1%!important;background-color:#fff}ion-select[_ngcontent-%COMP%]{border-radius:7px;border:2px solid;margin-right:1%}ion-list-header[_ngcontent-%COMP%]{font-size:30px;font-weight:700;color:rgba(2,92,83,.9)}html.ios[_ngcontent-%COMP%]{--ion-default-font:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",sans-serif}html.md[_ngcontent-%COMP%]{--ion-default-font:"Roboto","Helvetica Neue",sans-serif}body.backdrop-no-scroll[_ngcontent-%COMP%]{overflow:hidden}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline}root[_ngcontent-%COMP%]{--ion-safe-area-top:20px;--ion-safe-area-bottom:22px}#regBtn[_ngcontent-%COMP%]{--color:#fff;--background:rgba(2,92,83,0.9)}']}),t})()}];let P=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(O)],o.i]}),t})();var w=n("Uqay"),C=n("/Nyi");let y=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[i.b,s.e,r.M,P,w.ListResultPageModule,C.MenuHeaderPageModule]]}),t})()}}]);