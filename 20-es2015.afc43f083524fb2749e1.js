(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{QNcV:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL"),s=i("UbJi"),a=i("CcaC");let r=(()=>{class t{constructor(t,e){this.auth=t,this.userservice=e}register(t){return new Promise((e,i)=>{this.auth.createUserWithEmailAndPassword(t.email,t.password).then(i=>{e(i),this.userservice.persist(i.user.uid,t.title,t.fname,t.lname,t.street,t.housenumber,t.postalcode,t.city,t.email)},t=>i(t))})}login(t){return new Promise((e,i)=>{this.auth.signInWithEmailAndPassword(t.email,t.password).then(t=>e(t),t=>i(t))})}checkAuthState(){return this.auth.authState}SignOut(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(n.Tb(s.a),n.Tb(a.a))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},S9pY:function(t,e,i){"use strict";i.r(e),i.d(e,"PaymentChoicePageModule",(function(){return P}));var n=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),o=i("mrSG");class h{constructor(t,e){this.amount=t,this.client=e}}var c=i("fXoL"),l=i("CcaC"),p=i("QNcV"),u=i("rawN"),b=i("B1tq");const g=[{path:"",component:(()=>{class t{constructor(t,e,i,n,s,a){this.userService=t,this.authService=e,this.router=i,this.toastController=n,this.route=s,this.shipmentService=a,this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(console.log(t),console.log(this.router.getCurrentNavigation().extras.state.shipment),this.shipment=this.router.getCurrentNavigation().extras.state.shipment,null!=this.router.getCurrentNavigation().extras.state.article&&(this.article=this.router.getCurrentNavigation().extras.state.article),console.log("Routing worked"+this.shipment))})}ngOnInit(){this.subscription=this.authService.checkAuthState().subscribe(t=>{t&&this.userService.getUser(t.uid).subscribe(t=>{t&&(this.passenger=new h(1,t))})})}setPaymentChoice(t){switch(this.currentPaymentChoice=t.detail.value,t.detail.value){case"0":this.presentToast("Sie bezahlen mit Vorkasse");break;case"1":this.presentToast("Sie bezahlen mit PayPal");break;case"2":this.presentToast("Sie bezahlen Bar")}console.log("radioGroupChange",this.currentPaymentChoice)}presentToast(t){return Object(o.__awaiter)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:t,duration:2e3})).present()}))}pay(){null!=this.passenger?(this.shipment.passengerList.push(this.passenger),null!=this.article&&this.shipment.articleList.push(this.article),this.shipmentService.update(this.shipment.cargonaut,this.shipment.vehicle,this.shipment.passengerList,this.shipment.articleList,this.shipment.start,this.shipment.goal,this.shipment.date,this.shipment.startTime,this.shipment.length,this.shipment.height,this.shipment.weight,this.shipment.pricePerKg,this.shipment.seat,this.shipment.pricePerSeat,this.currentPaymentChoice,this.shipment.id),this.router.navigate(["/payment-success"],{state:{shipment:this.shipment}})):this.presentToast("Sie m\xfcssen eingeloggt sein um Routen zu buchen")}navigateToLogin(){this.router.navigate(["/login"])}navigateToRegister(){this.router.navigate(["/register"])}navigateToHome(){this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(l.a),c.Kb(p.a),c.Kb(r.g),c.Kb(a.W),c.Kb(r.a),c.Kb(u.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-payment-choice"]],inputs:{shipment:"shipment"},decls:50,vars:0,consts:[["id","main-content",1,"ion-page"],["src","assets/CargoLogo.PNG",3,"click"],["slot","primary"],["auto-hide","false"],["value","choice",3,"ionChange"],["lines","none"],[1,"ion-text-wrap"],[1,"subtitle"],["color","primary","slot","start","value","0"],["color","secondary","slot","start","value","1"],["id","paypalImg","src","assets/PayPal-Logo.png"],["color","warning","slot","start","value","2"],[3,"click"]],template:function(t,e){1&t&&(c.Lb(0,"app-menu-header"),c.Pb(1,"div",0),c.Pb(2,"ion-header"),c.Pb(3,"ion-toolbar"),c.Pb(4,"img",1),c.Xb("click",(function(){return e.navigateToHome()})),c.Ob(),c.Pb(5,"ion-buttons",2),c.Lb(6,"ion-menu-button",3),c.Ob(),c.Ob(),c.Ob(),c.Pb(7,"ion-content"),c.Pb(8,"ion-list"),c.Pb(9,"ion-radio-group",4),c.Xb("ionChange",(function(t){return e.setPaymentChoice(t)})),c.Pb(10,"ion-list-header"),c.Pb(11,"ion-label"),c.Pb(12,"h1"),c.nc(13,"Bezahlart:"),c.Ob(),c.Ob(),c.Ob(),c.Pb(14,"ion-item",5),c.Pb(15,"ion-label",6),c.Pb(16,"ion-text"),c.Pb(17,"h1"),c.nc(18,"Vorkasse"),c.Ob(),c.Pb(19,"p",7),c.nc(20,"Sie zahlen vorab und erhalten die Ware bequem und g\xfcnstig bei Zahlungseingang nach Hause geliefert."),c.Ob(),c.Ob(),c.Ob(),c.Lb(21,"ion-radio",8),c.Ob(),c.Pb(22,"ion-item",5),c.Lb(23,"ion-radio",9),c.Pb(24,"ion-label",6),c.Pb(25,"ion-text"),c.Pb(26,"h1"),c.nc(27,"PayPal"),c.Ob(),c.Lb(28,"img",10),c.Pb(29,"p",7),c.nc(30,"Bezahlung per PayPal - einfach, schnell und sicher"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(31,"ion-item",5),c.Lb(32,"ion-radio",11),c.Pb(33,"ion-label",6),c.Pb(34,"ion-text"),c.Pb(35,"h1"),c.nc(36,"Barbezahlung"),c.Ob(),c.Pb(37,"p",7),c.nc(38,"Sie zahlen einfach beim Vereinbarten \xdcbergabepunkt"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(39,"ion-grid"),c.Pb(40,"ion-row"),c.Lb(41,"ion-col"),c.Lb(42,"ion-col"),c.Pb(43,"ion-col"),c.Pb(44,"ion-button",12),c.Xb("click",(function(){return e.pay()})),c.Pb(45,"ion-text"),c.Pb(46,"p"),c.nc(47,"verpflichtend"),c.Ob(),c.Pb(48,"p"),c.nc(49,"verschicken"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob())},directives:[b.a,a.t,a.L,a.i,a.B,a.q,a.y,a.D,a.U,a.z,a.x,a.w,a.I,a.C,a.T,a.s,a.F,a.p,a.h],styles:["img[_ngcontent-%COMP%]{margin-top:8px;margin-left:15px;margin-bottom:8px;height:57px}ion-list[_ngcontent-%COMP%]{margin-top:30px;margin-left:20px}h1[_ngcontent-%COMP%]{font-size:35px;font-weight:700;color:rgba(2,92,83,.9)}ion-item[_ngcontent-%COMP%]{margin-top:40px}.subtitle[_ngcontent-%COMP%]{font-weight:700;color:hsla(0,0%,45.9%,.93)}ion-button[_ngcontent-%COMP%]{height:60px;border-radius:8px!important}#paypalImg[_ngcontent-%COMP%]{margin-top:-8px;margin-bottom:-8px;height:90px}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(g)],r.i]}),t})();var m=i("/Nyi");let P=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[n.b,s.e,a.M,d,m.MenuHeaderPageModule]]}),t})()},hE1G:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t,e,i,n,s,a,r,o,h,c,l,p,u,b,g,d){this.start=s,this.goal=a,this.date=r,this.startTime=o,this.length=h,this.height=c,this.weight=l,this.pricePerKg=p,this.seat=u,this.pricePerSeat=b,this.cargonaut=t,this.vehicle=e,this.passengerList=i,this.articleList=n,this.id=d,this.status=g}}},rawN:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("hE1G"),s=i("lJxs"),a=i("fXoL"),r=i("I/3d"),o=i("CcaC"),h=i("QNcV");let c=(()=>{class t{constructor(t,e,i){this.afs=t,this.userService=e,this.authService=i,this.shipmentCollection=t.collection("shipment")}static prepare(t){const e=Object.assign({},t);return delete e.id,e.start=e.start||null,e.goal=e.goal||null,e.date=e.date||null,e.length=e.length||null,e.height=e.height||null,e.weight=e.weight||null,e.pricePerKg=e.pricePerKg||null,e.seat=e.seat||null,e.cargonaut=e.cargonaut||null,e.pricePerSeat=e.pricePerSeat||null,e.vehicle=e.vehicle||null,e.articleList=e.articleList||null,e.passengerList=e.passengerList||null,e.startTime=e.startTime||null,e.status=e.status||null,e}persist(e,i,s,a,r,o,h,c,l,p,u,b,g,d,m){const P=new n.a(e,i,s,a,r,o,h,c,l,p,u,b,g,d,m);return this.shipmentCollection.add(t.prepare(P))}update(e,i,s,a,r,o,h,c,l,p,u,b,g,d,m,P){const O=new n.a(e,i,s,a,r,o,h,c,l,p,u,b,g,d,m,P);return this.shipmentCollection.doc(O.id).update(t.prepare(O))}delete(t){this.shipmentCollection.doc(t).delete()}getShipment(t){return this.shipmentCollection.doc(t).get().pipe(Object(s.a)(t=>{const e=t.data();return e.id=t.id,Object.assign({},e)}))}testAll(){return this.shipmentCollection.snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}testQuery(){return this.afs.collection("shipment",t=>t.where("seat",">=",1).where("goal","==","Warschau").where("start","==","Berlin").where("date","==","1933-02-04")).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchRoute(t,e,i,n){return this.afs.collection("shipment",s=>s.where("seat",">=",t).where("goal","==",i).where("start","==",e).where("date","==",n)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchTransport(t,e,i,n,a){return this.afs.collection("shipment",n=>n.where("start","==",t).where("goal","==",e).where("weight",">=",i)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}searchBoth(t,e,i,n){return this.afs.collection("shipment",s=>s.where("start","==",t).where("goal","==",e).where("date","==",i).where("seat",">=",n)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}getShipments(t){return this.afs.collection("shipment",e=>e.where("cargonaut","==",t)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}orderQuery(t){return this.afs.collection("shipment",e=>e.orderBy(t)).snapshotChanges().pipe(Object(s.a)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,Object.assign({},e)})))}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(r.a),a.Tb(o.a),a.Tb(h.a))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);